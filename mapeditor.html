<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebscapeRPG - Map Editor</title>
  <!-- Google Noto Color Emoji Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/mapeditor.css">
</head>
<body>
  <div class="editor-container">
    <!-- Header -->
    <header class="editor-header">
      <div class="header-left">
        <h1>🗺️ WebscapeRPG Map Editor</h1>
        <div class="editor-info">
          <span id="map-dimensions">100x100</span>
          <span id="selected-tool">Grass</span>
        </div>
      </div>
      <div class="header-right">
        <button id="back-to-game" class="header-btn">← Back to Game</button>
      </div>
    </header>

    <!-- Main Editor Area -->
    <div class="editor-main">
      <!-- Toolbar -->
      <div class="editor-toolbar">
        <!-- Map Level Selection -->
        <div class="tool-section">
          <h3>🗺️ Map Level</h3>
          <div class="map-level-buttons">
            <button class="map-level-button active" data-map-level="surface" title="Surface Level - Overworld">
              🌍 Surface
            </button>
            <button class="map-level-button" data-map-level="underground" title="Underground Level - Caves and dungeons">
              🏔️ Underground
            </button>
          </div>
        </div>
        
        <!-- Layer Selection -->
        <div class="tool-section">
          <h3>🎚️ Layers</h3>
          <div class="layer-buttons">
            <button class="layer-button active" data-layer="0" title="Terrain Layer - Ground tiles, walls, and obstacles">
              🌱 Terrain
            </button>
            <button class="layer-button" data-layer="1" title="Ground Objects Layer - Floor items and decorations">
              🪨 Ground Objects
            </button>
            <button class="layer-button" data-layer="2" title="Interactive Objects Layer - Banks, trees, ores">
              🏛️ Interactive Objects
            </button>
            <button class="layer-button" data-layer="3" title="Decorative Overlays Layer - Visual effects and overlays">
              ✨ Decorative Overlays
            </button>
          </div>
        </div>
        
        <!-- Wall Tools -->
        <div class="tool-section">
          <h3>Walls</h3>
          <div class="tool-grid">
            <button class="tile-button" data-tile="1" title="Rock">🗿</button>
            <button class="tile-button" data-tile="3" title="Water">💧</button>
            <button class="tile-button" data-tile="5" title="Brick Wall">🧱</button>
            <button class="tile-button" data-tile="9" title="Stone Wall">🗿</button>
            <button class="tile-button" data-tile="10" title="Wood Wall">🪵</button>
            <button class="tile-button" data-tile="11" title="Metal Wall">⚫</button>
            <button class="tile-button" data-tile="12" title="Crystal Wall">💎</button>
            <button class="tile-button" data-tile="13" title="Marble Wall">⚪</button>
            <button class="tile-button" data-tile="14" title="Obsidian Wall">⬛</button>
            <button class="tile-button" data-tile="15" title="Ice Wall">🧊</button>
            <button class="tile-button" data-tile="16" title="Thorned Wall">🌿</button>
            <button class="tile-button" data-tile="20" title="Lava">🌋</button>
            <button class="tile-button" data-tile="25" title="Sandstone Wall">🧱</button>
            <button class="tile-button" data-tile="26" title="Coral Wall">🪸</button>
            <button class="tile-button" data-tile="27" title="Bone Wall">🦴</button>
            <button class="tile-button" data-tile="28" title="Magic Barrier">✨</button>
            <button class="tile-button" data-tile="29" title="Volcanic Rock">🌋</button>
            <button class="tile-button" data-tile="30" title="Bamboo Wall">🎋</button>
            <button class="tile-button" data-tile="31" title="Iron Bars">🔒</button>
            <button class="tile-button" data-tile="32" title="Energy Field">⚡</button>
          </div>
        </div>
        
        <!-- Terrain Tools -->
        <div class="tool-section">
          <h3>Floors</h3>
          <div class="tool-grid">
            <button class="tile-button active" data-tile="0" title="Grass">🌱</button>
            <button class="tile-button" data-tile="2" title="Sand">🏜️</button>
            <button class="tile-button" data-tile="6" title="Dirt">🟫</button>
            <button class="tile-button" data-tile="4" title="Stone Floor">⬜</button>
            <button class="tile-button" data-tile="7" title="Cobblestone">🔳</button>
            <button class="tile-button" data-tile="8" title="Wooden Floor">🟤</button>
            <button class="tile-button" data-tile="17" title="Gravel">◦</button>
            <button class="tile-button" data-tile="18" title="Snow">❄️</button>
            <button class="tile-button" data-tile="19" title="Mud">🟤</button>
            <button class="tile-button" data-tile="21" title="Swamp">🐸</button>
            <button class="tile-button" data-tile="22" title="Tundra">🏔️</button>
            <button class="tile-button" data-tile="23" title="Desert Stone">🏺</button>
            <button class="tile-button" data-tile="24" title="Mossy Stone">🍃</button>
            <button class="tile-button" data-tile="33" title="Marble Floor">⬜</button>
            <button class="tile-button" data-tile="34" title="Carpet">🟥</button>
            <button class="tile-button" data-tile="35" title="Metal Grating">⬜</button>
            <button class="tile-button" data-tile="36" title="Crystal Floor">💎</button>
            <button class="tile-button" data-tile="37" title="Lava Rock">🪨</button>
            <button class="tile-button" data-tile="38" title="Ice Floor">🧊</button>
            <button class="tile-button" data-tile="39" title="Grass Path">🌿</button>
            <button class="tile-button" data-tile="40" title="Ancient Tiles">🔳</button>
            <!-- Clay Terrain Types -->
            <button class="tile-button" data-tile="41" title="Clay Deposit">🟤</button>
            <button class="tile-button" data-tile="42" title="Fire Clay">🔥</button>
            <button class="tile-button" data-tile="43" title="Cambrian Clay">🌊</button>
            <button class="tile-button" data-tile="44" title="White Clay">⬜</button>
            <button class="tile-button" data-tile="45" title="Black Clay">⬛</button>
            <button class="tile-button" data-tile="46" title="Sacred Clay">✨</button>
            <!-- Bone Excavation Terrain Types -->
            <button class="tile-button" data-tile="50" title="Bone Shards">🦴</button>
            <button class="tile-button" data-tile="51" title="Burial Mound">⚱️</button>
            <button class="tile-button" data-tile="52" title="Mammoth Pit">🦣</button>
            <button class="tile-button" data-tile="53" title="Behemoth Remains">💀</button>
            <button class="tile-button" data-tile="54" title="Fossil Shelf">🦕</button>
            <button class="tile-button" data-tile="55" title="Draconic Remains">🐲</button>
            <button class="tile-button" data-tile="56" title="Ancient Graveyard">☠️</button>
            <!-- Underground Terrain -->
            <button class="tile-button" data-tile="57" title="Black Void">⚫</button>
          </div>
        </div>
        
        <div class="tool-section">
          <h3>Objects</h3>
          <div class="tool-grid">
            <button class="tile-button" data-tile="bank" title="Bank">🏦</button>
            <button class="tile-button" data-tile="shop_general" title="General Store">🏪</button>
            <button class="tile-button" data-tile="shop_weapon" title="Weapon Shop">⚔️</button>
            <button class="tile-button" data-tile="shop_magic" title="Magic Shop">🔮</button>
            <button class="tile-button" data-tile="shop_mining" title="Mining Shop">⛏️</button>
            <button class="tile-button" data-tile="shop_fletching" title="Fletching Shop">🪶</button>
            <button class="tile-button" data-tile="shop_fishing" title="Fishing Shop">🎣</button>
            <button class="tile-button" data-tile="tree_regular" title="Tree">🌳</button>
            <button class="tile-button" data-tile="tree_oak" title="Oak Tree">🌳</button>
            <button class="tile-button" data-tile="tree_pine" title="Pine Tree">🌲</button>
            <button class="tile-button" data-tile="tree_palm" title="Palm Tree">🌴</button>
            <button class="tile-button" data-tile="tree_bamboo" title="Bamboo">🎋</button>
            <button class="tile-button" data-tile="tree_magic" title="Magic Tree">🎄</button>
            <button class="tile-button" data-tile="ore_copper" title="Copper Ore">🟤</button>
            <button class="tile-button" data-tile="ore_tin" title="Tin Ore">🔘</button>
            <button class="tile-button" data-tile="ore_iron" title="Iron Ore">⚫</button>
            <button class="tile-button" data-tile="ore_silver" title="Silver Ore">⚪</button>
            <button class="tile-button" data-tile="ore_gold" title="Gold Ore">🟡</button>
            <button class="tile-button" data-tile="ore_mithril" title="Mithril Ore">🔵</button>
            <button class="tile-button" data-tile="ore_adamantite" title="Adamantite Ore">🟢</button>
            <button class="tile-button" data-tile="item_spawn" title="Item Spawn">📦</button>
            <button class="tile-button" data-tile="pulp_basin" title="Pulp Basin">🪣</button>
            <button class="tile-button" data-tile="scribing_table" title="Scribing Table">📝</button>
                                <button class="tile-button" data-tile="cooking_range" title="Cooking Range">🔥</button>
                    <button class="tile-button" data-tile="apple_tree" title="Apple Tree">🌳🍎</button>
                    <button class="tile-button" data-tile="cherry_tree" title="Cherry Tree">🌳🍒</button>
                    <button class="tile-button" data-tile="peach_tree" title="Peach Tree">🌳🍑</button>
                    <button class="tile-button" data-tile="mushroom_patch" title="Mushroom Patch">🍄</button>
                    <button class="tile-button" data-tile="wheat_field" title="Wheat Field">🌾</button>
            <button class="tile-button" data-tile="fishing_spot_shrimp" title="Shrimp Fishing Spot">🦐</button>
            <button class="tile-button" data-tile="fishing_spot_sardine" title="Sardine Fishing Spot">🐟</button>
            <button class="tile-button" data-tile="fishing_spot_herring" title="Herring Fishing Spot">🐠</button>
            <button class="tile-button" data-tile="fishing_spot_anchovies" title="Anchovies Fishing Spot">🐟</button>
            <button class="tile-button" data-tile="fishing_spot_tuna" title="Tuna Fishing Spot">🐟</button>
            <button class="tile-button" data-tile="fishing_spot_lobster" title="Lobster Fishing Spot">🦞</button>
            <button class="tile-button" data-tile="fishing_spot_swordfish" title="Swordfish Fishing Spot">🗡️</button>
            <button class="tile-button" data-tile="fishing_spot_shark" title="Shark Fishing Spot">🦈</button>
            <!-- Ladders -->
            <button class="tile-button" data-tile="ladder_down" title="Ladder Down">🪜⬇️</button>
            <button class="tile-button" data-tile="ladder_up" title="Ladder Up">🪜⬆️</button>
          </div>
        </div>
        
        <div class="tool-section">
          <h3>Actions</h3>
          <div class="action-buttons">
            <button id="editor-eraser-tool" class="action-btn eraser-tool" data-tile="erase" title="Eraser Tool - Delete objects (terrain remains unchanged)">🧽 Eraser</button>
            <button id="editor-clear-map" class="action-btn">🗑️ Clear Map</button>
            <button id="editor-generate-random" class="action-btn">🎲 Generate Random</button>
            <button id="editor-save-map" class="action-btn">💾 Save Map</button>
            <button id="editor-load-map" class="action-btn">📁 Load Map</button>
            <button id="editor-apply-to-game" class="action-btn primary">✅ Apply to Game</button>
          </div>
          <input type="file" id="editor-file-input" accept=".json" style="display: none;">
        </div>

        <!-- Spawn Tools -->
        <div class="tool-section">
          <h3>Spawn</h3>
          <div class="tool-grid">
            <button class="tile-button" data-tile="player_spawn" title="Player Spawn">🎯</button>
          </div>
        </div>

        <!-- NPC Tools -->
        <div class="tool-section">
          <h3>NPCs</h3>
          <div class="tool-grid">
            <button class="tile-button" data-tile="npc_rat" title="Rat NPC">🐀</button>
            <button class="tile-button" data-tile="npc_cow" title="Cow NPC">🐄</button>
            <button class="tile-button" data-tile="npc_goblin" title="Goblin NPC">👺</button>
          </div>
        </div>
      </div>

      <!-- Canvas Area -->
      <div class="canvas-container">
        <div class="canvas-controls">
          <div class="zoom-controls">
            <button id="zoom-out" class="zoom-btn">−</button>
            <span id="zoom-level">100%</span>
            <button id="zoom-in" class="zoom-btn">+</button>
          </div>
          <div class="navigation-controls">
            <div class="nav-info">
              <span>WASD to navigate</span>
            </div>
            <div class="nav-buttons">
              <button id="nav-up" class="nav-btn" title="Move Up (W)">↑</button>
              <div class="nav-horizontal">
                <button id="nav-left" class="nav-btn" title="Move Left (A)">←</button>
                <button id="nav-down" class="nav-btn" title="Move Down (S)">↓</button>
                <button id="nav-right" class="nav-btn" title="Move Right (D)">→</button>
              </div>
            </div>
          </div>
          <div class="map-size-controls">
            <label for="map-width">Width:</label>
            <input type="number" id="map-width" min="10" max="200" value="100" class="size-input">
            <label for="map-height">Height:</label>
            <input type="number" id="map-height" min="10" max="200" value="100" class="size-input">
            <button id="resize-map" class="action-btn size-btn" title="Resize Map">📐 Resize</button>
          </div>
          <div class="canvas-info">
            <span id="mouse-coords">0, 0</span>
          </div>
        </div>
        <div class="canvas-wrapper">
          <div id="map-editor-canvas" class="map-canvas"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { initializeStandaloneMapEditor } from './js/mapeditor-standalone.js';
    
    // Initialize when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeStandaloneMapEditor);
    } else {
      initializeStandaloneMapEditor();
    }
  </script>
</body>
</html> 