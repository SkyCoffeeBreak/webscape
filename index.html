<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebscapeRPG - Skill-Based RPG Game</title>
  <!-- Google Noto Color Emoji Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/game.css">
  <script>
    let authRetries = 0;
    function checkAuthentication() {
      console.log('ğŸ” Starting authentication check...');
      fetch('/api/check-auth', { credentials: 'include' })
        .then(response => response.json())
        .then(data => {
          console.log('ğŸ” Auth check response:', data);
          if (!data.isAuthenticated) {
            if (authRetries < 2) {
              // Give the session cookie a bit longer to propagate
              authRetries++;
              console.log(`â³ Auth retry ${authRetries}...`);
              return setTimeout(checkAuthentication, 750);
            }
            console.log('âŒ Not authenticated after retries, redirecting to splash');
            window.location.replace('splash.html');
            return;
          }
          console.log('âœ… User authenticated:', data.username || 'unknown');
          // If authenticated, continue loading the game
        })
        .catch(error => {
          console.error('âŒ Auth check failed:', error);
          if (authRetries < 2) {
            authRetries++;
            console.log(`â³ Auth retry after error ${authRetries}...`);
            return setTimeout(checkAuthentication, 750);
          }
          window.location.replace('splash.html');
        });
    }
    
    // Delay initial check to give the server time to set the session cookie first
    setTimeout(checkAuthentication, 1500);

    // Error handler to detect if modules aren't loading
    window.moduleLoadError = false;
    window.addEventListener('error', function(event) {
      if (event.filename && event.filename.includes('/js/modules/') || 
          event.filename && event.filename.includes('/js/main.js')) {
        console.error('Module loading error detected:', event.message);
        window.moduleLoadError = true;
        
        // If module loading fails, load the fallback script
        if (!document.getElementById('fallback-script')) {
          const fallbackScript = document.createElement('script');
          fallbackScript.id = 'fallback-script';
          fallbackScript.src = 'js/fallback.js';
          document.head.appendChild(fallbackScript);
        }
      }
    }, true);
    
    // Also add a timeout to check if the module initialized correctly
    setTimeout(function() {
      // If no initialization has occurred yet, load the fallback
      if (!window.webscapeInitialized && !window.moduleLoadError) {
        console.warn('Module initialization timeout - loading fallback');
        if (!document.getElementById('fallback-script')) {
          const fallbackScript = document.createElement('script');
          fallbackScript.id = 'fallback-script';
          fallbackScript.src = 'js/fallback.js';
          document.head.appendChild(fallbackScript);
        }
      }
    }, 1000);
  </script>
</head>
<body>
  <div class="game-container">
    <!-- Character Profile -->
    <div class="character-profile" id="character-profile">
      <div class="character-name" id="character-name">Adventurer</div>
      <div class="character-info">
        <div class="character-stats">
          Combat Level: <span id="combat-level" class="character-level">3</span>
        </div>
        <div class="character-stats">
          Total Level: <span id="total-level-header" class="character-level">31</span>
        </div>
        <div class="character-stats">
          â¤ï¸ Hitpoints: <span id="header-hp" class="character-level">5 / 12</span>
        </div>
      </div>
    </div>
    
    <!-- Main Content Area -->
    <div class="main-content">
      <!-- Game Area (Left) -->
      <div class="game-area">
        <div id="game-tab">
          <!-- Game world will be initialized here -->
        </div>
        
        <!-- Chat Box -->
        <div class="chat-container">
          <div class="chat-messages" id="chat-messages">
            <!-- Chat messages will be populated here -->
          </div>
          <div class="chat-input-container">
            <input type="text" id="chat-input" placeholder="Press Enter to chat..." maxlength="280">
            <button id="chat-send" class="chat-send-btn">Send</button>
          </div>
        </div>
      </div>
      
      <!-- Info Area (Right) -->
      <div class="info-area">
        <!-- Tab Navigation -->
        <div class="tabs">
          <div class="tab active" data-tab="skills">ğŸ“Š</div>
          <div class="tab" data-tab="inventory">ğŸ’¼</div>
          <div class="tab" data-tab="equipment">âš”ï¸</div>
          <div class="tab" data-tab="quests">ğŸ“˜</div>
          <div class="tab" data-tab="prayer">âœ¨</div>
          <div class="tab" data-tab="magic">â˜„ï¸</div>
          <div class="tab" data-tab="alchemy">âš–ï¸</div>
          <div class="tab" data-tab="pet">ğŸ¾</div>
        </div>
        
        <!-- Tab Content -->
        <div class="tab-content">
          <!-- Skills Tab -->
          <div class="tab-pane active" id="skills-tab">
            <div class="skills-container">
              <!-- Skills Navigation -->
              <div class="skills-nav">
                <button class="skills-nav-btn active" data-page="1">Combat</button>
                <button class="skills-nav-btn" data-page="2">Gathering</button>
                <button class="skills-nav-btn" data-page="3">Artisan</button>
                <button class="skills-nav-btn" data-page="4">Magic</button>
                <button class="skills-nav-btn" data-page="5">Support</button>
                <button class="skills-nav-btn" data-page="6">Companion</button>
                <button class="skills-nav-btn" data-page="7">Misc</button>
                <button class="skills-nav-btn" data-page="all">All</button>
              </div>

              <!-- Skills Pages -->
              <!-- Page 1: Combat Skills -->
              <div class="skills-page active" id="skills-page-1">
                <div class="skill-ui">
                  <!-- Combat Skills -->
                  <div class="skill" data-skill="attack">
                    <div class="skill-name">Attack</div>
                    <div class="skill-icon">âš”ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="strength">
                    <div class="skill-name">Strength</div>
                    <div class="skill-icon">ğŸ’ª</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="stamina">
                    <div class="skill-name">Stamina</div>
                    <div class="skill-icon">â³</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="magic">
                    <div class="skill-name">Magic</div>
                    <div class="skill-icon">ğŸª„</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="darkmagic">
                    <div class="skill-name">Dark Magic</div>
                    <div class="skill-icon">ğŸŒ‘</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="lightmagic">
                    <div class="skill-name">Light Magic</div>
                    <div class="skill-icon">ğŸ”…</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="ranged">
                    <div class="skill-name">Ranged</div>
                    <div class="skill-icon">ğŸ¹</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="gunner">
                    <div class="skill-name">Gunner</div>
                    <div class="skill-icon">ğŸ”«</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="blasting">
                    <div class="skill-name">Blasting</div>
                    <div class="skill-icon">ğŸ’£</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="cardmaster">
                    <div class="skill-name">Cardmaster</div>
                    <div class="skill-icon">ğŸƒ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="poisoning">
                    <div class="skill-name">Poisoning</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="rogue">
                    <div class="skill-name">Rogue</div>
                    <div class="skill-icon">ğŸ—¡ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="defence">
                    <div class="skill-name">Defence</div>
                    <div class="skill-icon">ğŸ›¡ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="hitpoints">
                    <div class="skill-name">Hitpoints</div>
                    <div class="skill-icon">â¤ï¸</div>
                    <div class="skill-level">10</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="prayer">
                    <div class="skill-name">Prayer</div>
                    <div class="skill-icon">âœ¨</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="sealing">
                    <div class="skill-name">Sealing</div>
                    <div class="skill-icon">â›“ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="slayer">
                    <div class="skill-name">Slayer</div>
                    <div class="skill-icon">ğŸ’€</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="dungeoneering">
                    <div class="skill-name">Dungeoneering</div>
                    <div class="skill-icon">ğŸ°</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 2: Gathering Skills -->
              <div class="skills-page" id="skills-page-2">
                <div class="skill-ui">
                  <div class="skill" data-skill="mining">
                    <div class="skill-name">Mining</div>
                    <div class="skill-icon">â›ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="fishing">
                    <div class="skill-name">Fishing</div>
                    <div class="skill-icon">ğŸ£</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="harvesting">
                    <div class="skill-name">Harvesting</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="woodcutting">
                    <div class="skill-name">Woodcutting</div>
                    <div class="skill-icon">ğŸŒ²</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="hunting">
                    <div class="skill-name">Hunting</div>
                    <div class="skill-icon">ğŸ—</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="mycology">
                    <div class="skill-name">Mycology</div>
                    <div class="skill-icon">ğŸ„</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="diving">
                    <div class="skill-name">Diving</div>
                    <div class="skill-icon">ğŸ¤¿</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="digging">
                    <div class="skill-name">Digging</div>
                    <div class="skill-icon">ğŸª</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="archaeology">
                    <div class="skill-name">Archaeology</div>
                    <div class="skill-icon">ğŸ›ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="bugCatching">
                    <div class="skill-name">Bug Catching</div>
                    <div class="skill-icon">ğŸ¦‹</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="ghostHunting">
                    <div class="skill-name">Ghost Hunting</div>
                    <div class="skill-icon">ğŸ‘»</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 3: Artisan Skills -->
              <div class="skills-page" id="skills-page-3">
                <div class="skill-ui">
                  <div class="skill" data-skill="smithing">
                    <div class="skill-name">Smithing</div>
                    <div class="skill-icon">ğŸ”¨</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="crafting">
                    <div class="skill-name">Crafting</div>
                    <div class="skill-icon">ğŸ’</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="engineering">
                    <div class="skill-name">Engineering</div>
                    <div class="skill-icon">âš™ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="cooking">
                    <div class="skill-name">Cooking</div>
                    <div class="skill-icon">ğŸ–</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="confectionery">
                    <div class="skill-name">Confectionery</div>
                    <div class="skill-icon">ğŸ°</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="fletching">
                    <div class="skill-name">Fletching</div>
                    <div class="skill-icon">ğŸª¶</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="scribing">
                    <div class="skill-name">Scribing</div>
                    <div class="skill-icon">ğŸ“œ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="apothecary">
                    <div class="skill-name">Apothecary</div>
                    <div class="skill-icon">ğŸ‡</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="brewing">
                    <div class="skill-name">Brewing</div>
                    <div class="skill-icon">ğŸº</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="painting">
                    <div class="skill-name">Painting</div>
                    <div class="skill-icon">ğŸ¨</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="pottery">
                    <div class="skill-name">Pottery</div>
                    <div class="skill-icon">ğŸº</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="masonry">
                    <div class="skill-name">Masonry</div>
                    <div class="skill-icon">ğŸ§±</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="bonecarving">
                    <div class="skill-name">Bonecarving</div>
                    <div class="skill-icon">ğŸ¦´</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="tailoring">
                    <div class="skill-name">Tailoring</div>
                    <div class="skill-icon">ğŸª¡</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="candlemaking">
                    <div class="skill-name">Candlemaking</div>
                    <div class="skill-icon">ğŸ•¯ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="glassworking">
                    <div class="skill-name">Glassworking</div>
                    <div class="skill-icon">ğŸª</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="toymaking">
                    <div class="skill-name">Toymaking</div>
                    <div class="skill-icon">ğŸ§¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="carpentry">
                    <div class="skill-name">Carpentry</div>
                    <div class="skill-icon">ğŸªš</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="butchery">
                    <div class="skill-name">Butchery</div>
                    <div class="skill-icon">ğŸ”ª</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="leatherworking">
                    <div class="skill-name">Leather Working</div>
                    <div class="skill-icon">ğŸ‘</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="maskMaking">
                    <div class="skill-name">Mask Making</div>
                    <div class="skill-icon">ğŸ‘º</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="shellcraft">
                    <div class="skill-name">Shellcraft</div>
                    <div class="skill-icon">ğŸš</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="invention">
                    <div class="skill-name">Invention</div>
                    <div class="skill-icon">ğŸ’¡</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="scrapping">
                    <div class="skill-name">Scrapping</div>
                    <div class="skill-icon">â™»ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 4: Magic Skills -->
              <div class="skills-page" id="skills-page-4">
                <div class="skill-ui">
                  <div class="skill" data-skill="creation">
                    <div class="skill-name">Creation</div>
                    <div class="skill-icon">ğŸ£</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="enchanting">
                    <div class="skill-name">Enchanting</div>
                    <div class="skill-icon">ğŸ’</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="runecrafting">
                    <div class="skill-name">Runecrafting</div>
                    <div class="skill-icon">ğŸ”˜</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="alchemy">
                    <div class="skill-name">Alchemy</div>
                    <div class="skill-icon">âš–ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="warding">
                    <div class="skill-name">Warding</div>
                    <div class="skill-icon">ğŸ“¿</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="astrology">
                    <div class="skill-name">Astrology</div>
                    <div class="skill-icon">ğŸ”®</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="dreaming">
                    <div class="skill-name">Dreaming</div>
                    <div class="skill-icon">ğŸ’¤</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="geomancy">
                    <div class="skill-name">Geomancy</div>
                    <div class="skill-icon">ğŸ—»</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="windweaving">
                    <div class="skill-name">Windweaving</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="spiritbinding">
                    <div class="skill-name">Spiritbinding</div>
                    <div class="skill-icon">â›©ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="shifting">
                    <div class="skill-name">Shifting</div>
                    <div class="skill-icon">ğŸƒ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="druidism">
                    <div class="skill-name">Druidism</div>
                    <div class="skill-icon">ğŸŒ¿</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 5: Support Skills -->
              <div class="skills-page" id="skills-page-5">
                <div class="skill-ui">
                  <div class="skill" data-skill="thieving">
                    <div class="skill-name">Thieving</div>
                    <div class="skill-icon">ğŸ­</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="delivery">
                    <div class="skill-name">Delivery</div>
                    <div class="skill-icon">âœ‰ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="knowledge">
                    <div class="skill-name">Knowledge</div>
                    <div class="skill-icon">ğŸ“š</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="diplomacy">
                    <div class="skill-name">Diplomacy</div>
                    <div class="skill-icon">ğŸ•Šï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="sailing">
                    <div class="skill-name">Sailing</div>
                    <div class="skill-icon">âš“ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="ruling">
                    <div class="skill-name">Ruling</div>
                    <div class="skill-icon">ğŸ‘‘</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="ranching">
                    <div class="skill-name">Ranching</div>
                    <div class="skill-icon">ğŸ„</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="beekeeping">
                    <div class="skill-name">Beekeeping</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="aquaculture">
                    <div class="skill-name">Aquaculture</div>
                    <div class="skill-icon">ğŸŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="gardening">
                    <div class="skill-name">Gardening</div>
                    <div class="skill-icon">ğŸŒº</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="crystallization">
                    <div class="skill-name">Crystallization</div>
                    <div class="skill-icon">ğŸª¨</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="gravekeeping">
                    <div class="skill-name">Gravekeeping</div>
                    <div class="skill-icon">ğŸª¦</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="merchanting">
                    <div class="skill-name">Merchanting</div>
                    <div class="skill-icon">ğŸ’°</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="barista">
                    <div class="skill-name">Barista</div>
                    <div class="skill-icon">â˜•ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="firemaking">
                    <div class="skill-name">Firemaking</div>
                    <div class="skill-icon">ğŸ”¥</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="bestiary">
                    <div class="skill-name">Bestiary</div>
                    <div class="skill-icon">ğŸ““</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="prospecting">
                    <div class="skill-name">Prospecting</div>
                    <div class="skill-icon">ğŸ”</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="agility">
                    <div class="skill-name">Agility</div>
                    <div class="skill-icon">âš¡</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 6: Companion Skills -->
              <div class="skills-page" id="skills-page-6">
                <div class="skill-ui">
                  <div class="skill" data-skill="taming">
                    <div class="skill-name">Taming</div>
                    <div class="skill-icon">ğŸ¾</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="summoning">
                    <div class="skill-name">Summoning</div>
                    <div class="skill-icon">ğŸº</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="tidecalling">
                    <div class="skill-name">Tidecalling</div>
                    <div class="skill-icon">ğŸ³</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="necromancy">
                    <div class="skill-name">Necromancy</div>
                    <div class="skill-icon">âš°ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="falconry">
                    <div class="skill-name">Falconry</div>
                    <div class="skill-icon">ğŸ¦…</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="pacting">
                    <div class="skill-name">Pacting</div>
                    <div class="skill-icon">ğŸ©¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="dracology">
                    <div class="skill-name">Dracology</div>
                    <div class="skill-icon">ğŸ‰</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="golemancy">
                    <div class="skill-name">Golemancy</div>
                    <div class="skill-icon">ğŸ—¿</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="puppeteering">
                    <div class="skill-name">Puppeteering</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>

              <!-- Page 7: Miscellaneous Skills -->
              <div class="skills-page" id="skills-page-7">
                <div class="skill-ui">
                  <div class="skill" data-skill="entertainment">
                    <div class="skill-name">Entertainment</div>
                    <div class="skill-icon">ğŸª</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="barding">
                    <div class="skill-name">Barding</div>
                    <div class="skill-icon">ğŸª•</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="gambling">
                    <div class="skill-name">Gambling</div>
                    <div class="skill-icon">ğŸ²</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="occultism">
                    <div class="skill-name">Occultism</div>
                    <div class="skill-icon">ğŸ§¿</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="riding">
                    <div class="skill-name">Riding</div>
                    <div class="skill-icon">ğŸ</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="exploration">
                    <div class="skill-name">Exploration</div>
                    <div class="skill-icon">ğŸ—ºï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="mythology">
                    <div class="skill-name">Mythology</div>
                    <div class="skill-icon">ğŸ¦â€ğŸ”¥</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="artisan">
                    <div class="skill-name">Artisan</div>
                    <div class="skill-icon">âš’ï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                  <div class="skill" data-skill="snowcraft">
                    <div class="skill-name">Snowcraft</div>
                    <div class="skill-icon">â˜ƒï¸</div>
                    <div class="skill-level">1</div>
                    <div class="skill-exp-bar"><div class="skill-exp-fill"></div></div>
                  </div>
                </div>
              </div>



              <!-- Total Level Display -->
              <div class="total" id="totalLevel">Total Level: 101</div>
            </div>
          </div>

          <!-- Inventory Tab -->
          <div class="tab-pane" id="inventory-tab">
            <h2>Inventory</h2>
            <p>Your inventory will be displayed here.</p>
          </div>
          
          <!-- Quests Tab -->
          <div class="tab-pane" id="quests-tab">
            <h2>Quests</h2>
            <p>Your quests will be displayed here.</p>
          </div>
          
          <!-- Prayer Tab -->
          <div class="tab-pane" id="prayer-tab">
            <h2>Prayer Shrine</h2>
            <p>Divine abilities will be available here in a future update.</p>
          </div>

          <!-- Pet Tab -->
          <div class="tab-pane" id="pet-tab">
            <h2>Your Companions</h2>
            <p>Stats for companions will be available here in a future update.</p>
          </div>

          <!-- Equipment Tab -->
          <div class="tab-pane" id="equipment-tab">
            <h2>Your Gear</h2>
            
            <!-- Combat Options -->
            <div class="gear-section">
              <h3>Combat Options</h3>
              <div class="combat-options">
                <div class="option-row">
                  <label>
                    <input type="checkbox" id="auto-retaliate" checked> 
                    Auto Retaliate
                  </label>
                </div>
                <div class="option-row">
                  <label for="combat-style-select">Combat Style:</label>
                  <select id="combat-style-select">
                    <option value="melee-accurate">Accurate (Attack XP)</option>
                    <option value="melee-aggressive">Aggressive (Attack XP)</option>
                    <option value="melee-defensive">Defensive (Defence XP)</option>
                    <option value="melee-controlled">Controlled (Shared XP)</option>
                  </select>
                </div>
              </div>
            </div>

            <!-- Equipment Slots -->
            <div class="gear-section">
              <h3>Equipment</h3>
              <div class="equipment-grid">
                <!-- Row 1: Amulet / Helmet / Arrows -->
                <div class="equipment-slot empty" data-slot="amulet" title="Amulet">
                  <span class="slot-icon">ğŸ“¿</span>
                  <span class="slot-name">Amulet</span>
                </div>
                <div class="equipment-slot empty" data-slot="helmet" title="Helmet">
                  <span class="slot-icon">â›‘ï¸</span>
                  <span class="slot-name">Helmet</span>
                </div>
                <div class="equipment-slot empty" data-slot="arrows" title="Arrows">
                  <span class="slot-icon">ğŸ¹</span>
                  <span class="slot-name">Arrows</span>
                </div>

                <!-- Row 2: Weapon / Body / Shield -->
                <div class="equipment-slot empty" data-slot="weapon" title="Weapon">
                  <span class="slot-icon">âš”ï¸</span>
                  <span class="slot-name">Weapon</span>
                </div>
                <div class="equipment-slot empty" data-slot="body" title="Body">
                  <span class="slot-icon">ğŸ›¡ï¸</span>
                  <span class="slot-name">Body</span>
                </div>
                <div class="equipment-slot empty" data-slot="shield" title="Shield">
                  <span class="slot-icon">ğŸ›¡ï¸</span>
                  <span class="slot-name">Shield</span>
                </div>

                <!-- Row 3: Gloves / Legs / Cape -->
                <div class="equipment-slot empty" data-slot="gloves" title="Gloves">
                  <span class="slot-icon">ğŸ§¤</span>
                  <span class="slot-name">Gloves</span>
                </div>
                <div class="equipment-slot empty" data-slot="legs" title="Legs">
                  <span class="slot-icon">ğŸ‘–</span>
                  <span class="slot-name">Legs</span>
                </div>
                <div class="equipment-slot empty" data-slot="cape" title="Cape">
                  <span class="slot-icon">ğŸ§¥</span>
                  <span class="slot-name">Cape</span>
                </div>

                <!-- Row 4: Ring 1 / Boots / Ring 2 -->
                <div class="equipment-slot empty" data-slot="ring" title="Ring">
                  <span class="slot-icon">ğŸ’</span>
                  <span class="slot-name">Ring</span>
                </div>
                <div class="equipment-slot empty" data-slot="boots" title="Boots">
                  <span class="slot-icon">ğŸ‘¢</span>
                  <span class="slot-name">Boots</span>
                </div>
                <div class="equipment-slot empty" data-slot="ring2" title="Ring">
                  <span class="slot-icon">ğŸ’</span>
                  <span class="slot-name">Ring</span>
                </div>
              </div>
            </div>

            <!-- Combat Stats -->
            <div class="gear-section">
              <h3>Combat Stats</h3>
              <div class="combat-stats">
                <div class="stat-category">
                  <h4>Attack Bonuses</h4>
                  <div class="stat-row">
                    <span class="stat-label">âš”ï¸ Melee Attack:</span>
                    <span class="stat-value" id="melee-attack-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸ¹ Ranged Attack:</span>
                    <span class="stat-value" id="ranged-attack-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸª„ Magic Attack:</span>
                    <span class="stat-value" id="magic-attack-bonus">+0</span>
                  </div>
                </div>
                
                <div class="stat-category">
                  <h4>Defence Bonuses</h4>
                  <div class="stat-row">
                    <span class="stat-label">âš”ï¸ Melee Defence:</span>
                    <span class="stat-value" id="melee-defence-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸ¹ Ranged Defence:</span>
                    <span class="stat-value" id="ranged-defence-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸª„ Magic Defence:</span>
                    <span class="stat-value" id="magic-defence-bonus">+0</span>
                  </div>
                </div>
                
                <div class="stat-category">
                  <h4>Combat Stats</h4>
                  <div class="stat-row">
                    <span class="stat-label">ğŸ’ª Melee Strength:</span>
                    <span class="stat-value" id="melee-strength-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸ¯ Ranged Strength:</span>
                    <span class="stat-value" id="ranged-strength-bonus">+0</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">âš¡ Attack Speed:</span>
                    <span class="stat-value" id="attack-speed-display">4 ticks</span>
                  </div>
                  <div class="stat-row">
                    <span class="stat-label">ğŸ’¥ Max Hit:</span>
                    <span class="stat-value" id="max-hit-display">1</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Alchemy Tab -->
          <div class="tab-pane" id="alchemy-tab">
            <h2>Alchemy Workbench</h2>
            <p>Transmutation abilities will be available here in a future update.</p>
          </div>

          <!-- Magic Tab -->
          <div class="tab-pane" id="magic-tab">
            <h2>Spellbook</h2>
            <p>Mystical spells coming soon!</p>
          </div>

          <!-- Friends Tab -->
          <div class="tab-pane" id="friends-tab">
            <h2>Friends List</h2>
            <p>Friend/Ignore lists coming soon.</p>
          </div>

          <!-- Emotes Tab -->
          <div class="tab-pane" id="emotes-tab">
            <h2>Emotes</h2>
            <p>Click an emoji to send it in chat:</p>
            <div class="emote-grid">
              <!-- Happy / Positive -->
              <div class="emote-button" data-emote="ğŸ˜€" title="Happy">ğŸ˜€</div>
              <div class="emote-button" data-emote="ğŸ˜Š" title="Smiling">ğŸ˜Š</div>
              <div class="emote-button" data-emote="ğŸ˜‚" title="Laughing">ğŸ˜‚</div>
              <div class="emote-button" data-emote="ğŸ¤£" title="ROFL">ğŸ¤£</div>
              <div class="emote-button" data-emote="ğŸ¥°" title="In Love">ğŸ¥°</div>
              <div class="emote-button" data-emote="ğŸ˜" title="Cool">ğŸ˜</div>
              <div class="emote-button" data-emote="ğŸ¤—" title="Hug">ğŸ¤—</div>
              <div class="emote-button" data-emote="ğŸ¥³" title="Party">ğŸ¥³</div>

              <!-- Negative / Surprised -->
              <div class="emote-button" data-emote="ğŸ˜¢" title="Crying">ğŸ˜¢</div>
              <div class="emote-button" data-emote="ğŸ˜­" title="Sobbing">ğŸ˜­</div>
              <div class="emote-button" data-emote="ğŸ˜¡" title="Mad">ğŸ˜¡</div>
              <div class="emote-button" data-emote="ğŸ˜¤" title="Frustrated">ğŸ˜¤</div>
              <div class="emote-button" data-emote="ğŸ˜±" title="Shocked">ğŸ˜±</div>
              <div class="emote-button" data-emote="ğŸ˜´" title="Sleepy">ğŸ˜´</div>
              <div class="emote-button" data-emote="ğŸ¥º" title="Pleading">ğŸ¥º</div>
              <div class="emote-button" data-emote="ğŸ¤”" title="Thinking">ğŸ¤”</div>

              <!-- Gestures / Actions -->
              <div class="emote-button" data-emote="ğŸ‘" title="Thumbs Up">ğŸ‘</div>
              <div class="emote-button" data-emote="ğŸ‘" title="Thumbs Down">ğŸ‘</div>
              <div class="emote-button" data-emote="âœ‹" title="High Five">âœ‹</div>
              <div class="emote-button" data-emote="ğŸ‘" title="Clap">ğŸ‘</div>
              <div class="emote-button" data-emote="ğŸ™" title="Pray">ğŸ™</div>
              <div class="emote-button" data-emote="ğŸ¤" title="Handshake">ğŸ¤</div>
              <div class="emote-button" data-emote="ğŸ‘‹" title="Wave">ğŸ‘‹</div>
              <div class="emote-button" data-emote="ğŸ’ª" title="Strong">ğŸ’ª</div>

              <!-- Game / Item -->
              <div class="emote-button" data-emote="âš”ï¸" title="Sword">âš”ï¸</div>
              <div class="emote-button" data-emote="ğŸ¹" title="Bow">ğŸ¹</div>
              <div class="emote-button" data-emote="ğŸª„" title="Magic">ğŸª„</div>
              <div class="emote-button" data-emote="ğŸ’°" title="Gold">ğŸ’°</div>
              <div class="emote-button" data-emote="ğŸ’¯" title="100">ğŸ’¯</div>
              <div class="emote-button" data-emote="â—ï¸" title="Exclaim">â—ï¸</div>
              <div class="emote-button" data-emote="â“" title="Question">â“</div>
              <div class="emote-button" data-emote="â‰ï¸" title="!?">â‰ï¸</div>
            </div>
          </div>

          <!-- Settings Tab -->
          <div class="tab-pane" id="settings-tab">
            <h2>Settings</h2>
            <div class="settings-section">
              <h3>Game Settings</h3>
              <div class="setting-item">
                <label for="music-volume">Music Volume:</label>
                <input type="range" id="music-volume" min="0" max="100" value="50">
              </div>
              <div class="setting-item">
                <label for="sound-volume">Sound Effects Volume:</label>
                <input type="range" id="sound-volume" min="0" max="100" value="70">
              </div>
              <div class="setting-item">
                <label for="bubble-opacity">Speech Bubble Opacity:</label>
                <input type="range" id="bubble-opacity" min="10" max="100" value="50">
                <span id="bubble-opacity-value">50%</span>
              </div>
              <div class="setting-item">
                <label for="auto-logout-minutes">Auto-Logout (minutes):</label>
                <input type="number" id="auto-logout-minutes" min="1" max="60" value="5" style="width:60px;">
                <span id="auto-logout-hint"></span>
              </div>
            </div>
            <div class="settings-section">
              <h3>Developer Tools</h3>
              <div class="setting-item">
                <button class="control-btn" onclick="window.open('mapeditor.html', '_blank')">ğŸ—ºï¸ Open Map Editor</button>
              </div>
            </div>
            <div class="settings-section">
              <h3>Profile</h3>
              <div class="setting-item">
                <label for="character-name-input">Character Name:</label>
                <input type="text" id="character-name-input" placeholder="Enter character name">
                <button id="change-name-btn">Update</button>
              </div>
              <div class="setting-item">
                <label>Player Color:</label>
                <div class="color-picker" id="player-color-picker">
                  <!-- Row 1 primary hues -->
                  <div class="color-option active" data-color="#3498db" style="background-color: #3498db;" title="Blue"></div>
                  <div class="color-option" data-color="#e74c3c" style="background-color: #e74c3c;" title="Red"></div>
                  <div class="color-option" data-color="#2ecc71" style="background-color: #2ecc71;" title="Green"></div>
                  <div class="color-option" data-color="#f1c40f" style="background-color: #f1c40f;" title="Yellow"></div>
                  <div class="color-option" data-color="#9b59b6" style="background-color: #9b59b6;" title="Purple"></div>
                  <div class="color-option" data-color="#1abc9c" style="background-color: #1abc9c;" title="Turquoise"></div>
                  <div class="color-option" data-color="#e67e22" style="background-color: #e67e22;" title="Orange"></div>
                  <div class="color-option" data-color="#ecf0f1" style="background-color: #ecf0f1;" title="White"></div>

                  <!-- Row 2 darker tones -->
                  <div class="color-option" data-color="#2980b9" style="background-color: #2980b9;" title="Dark Blue"></div>
                  <div class="color-option" data-color="#c0392b" style="background-color: #c0392b;" title="Dark Red"></div>
                  <div class="color-option" data-color="#27ae60" style="background-color: #27ae60;" title="Dark Green"></div>
                  <div class="color-option" data-color="#d35400" style="background-color: #d35400;" title="Pumpkin"></div>
                  <div class="color-option" data-color="#8e44ad" style="background-color: #8e44ad;" title="Dark Purple"></div>
                  <div class="color-option" data-color="#16a085" style="background-color: #16a085;" title="Dark Turquoise"></div>
                  <div class="color-option" data-color="#95a5a6" style="background-color: #95a5a6;" title="Gray"></div>
                  <div class="color-option" data-color="#2c3e50" style="background-color: #2c3e50;" title="Midnight"></div>

                  <!-- Row 3 vibrant / fun -->
                  <div class="color-option" data-color="#ff6b9d" style="background-color: #ff6b9d;" title="Pink"></div>
                  <div class="color-option" data-color="#4ecdc4" style="background-color: #4ecdc4;" title="Mint"></div>
                  <div class="color-option" data-color="#a8e6cf" style="background-color: #a8e6cf;" title="Light Green"></div>
                  <div class="color-option" data-color="#ffd93d" style="background-color: #ffd93d;" title="Bright Yellow"></div>
                  <div class="color-option" data-color="#6c5ce7" style="background-color: #6c5ce7;" title="Lavender"></div>
                  <div class="color-option" data-color="#fd79a8" style="background-color: #fd79a8;" title="Rose"></div>
                  <div class="color-option" data-color="#00b894" style="background-color: #00b894;" title="Teal"></div>
                  <div class="color-option" data-color="#e17055" style="background-color: #e17055;" title="Coral"></div>

                  <!-- Custom -->
                  <input type="color" id="custom-color-input" value="#ffffff" title="Custom color" style="grid-column: span 8; height: 35px; border: none; cursor: pointer; padding: 0;">
                </div>
              </div>
              <div class="setting-item">
                <button id="reset-progress-btn" class="danger-btn">Reset All Progress</button>
              </div>
            </div>
          </div>

          <!-- Logout Tab -->
          <div class="tab-pane" id="logout-tab">
            <h2>Ready to leave?</h2>
            <p>You can safely log out of your session here.</p>
            <button id="logout-btn" class="logout-btn">ğŸšª Logout</button>
          </div>
        </div>

        <!-- Secondary Tab Navigation (Friends, Emotes, Settings, Logout) -->
        <div class="tabs secondary-tabs">
          <div class="tab" data-tab="friends">ğŸ‘¥</div>
          <div class="tab" data-tab="emotes">ğŸ’¬</div>
          <div class="tab" data-tab="settings">âš™ï¸</div>
          <div class="tab" data-tab="logout">ğŸšª</div>
        </div>
      </div>
    </div>
  </div>

  <!-- All Skills Modal Popup -->
  <div id="all-skills-modal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Complete Skills Overview</h2>
        <button class="modal-close" id="close-all-skills">&times;</button>
      </div>
      <div class="modal-body">
        <div class="all-skills-mega-grid">
          <!-- All skills will be generated here by JavaScript -->
        </div>
      </div>
    </div>
  </div>
  
  <!-- Import shared item definitions -->
  <script src="shared/itemDefinitions.js"></script>
  
  <!-- Three.js dependencies -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
    }
  }
  </script>
  
  <!-- Import our modular JavaScript code -->
  <script type="module">
    import { initGame } from './js/main.js';
    
    // Mark as initialized to prevent fallback from loading
    window.webscapeInitialized = true;
    
    // Initialize the game when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initGame);
    } else {
      initGame();
    }
  </script>
</body>
</html>